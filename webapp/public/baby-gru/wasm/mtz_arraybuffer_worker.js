var CCP4Module;importScripts("web_example.js"),createCCP4Module({print(e){postMessage(["output",e])},printErr(e){postMessage(["output",e])}}).then((function(e){CCP4Module=e})).catch((e=>{console.log("CCP4 problem :("),console.log(e)})),onmessage=function(e){var o=e.data[0];const l=new Uint8Array(o);var t=e.data[1];let a="FC",c="PHIC";void 0!==e.data[2]&&void 0!==e.data[3]&&(a=e.data[2],c=e.data[3]);try{CCP4Module.FS_createDataFile(".",t,l,!0,!0)}catch(e){}const n=CCP4Module.get_mtz_columns(t);console.log(n);for(let e=0;e<n.size();e+=2)console.log(n.get(e),n.get(e+1));console.log("Send",t,"to clipper");var r=CCP4Module.clipper_example_with_cols(t,a,c,2);console.log("In the worker..."),console.log(r),console.log(r.cell()),console.log(r.cell().a()),console.log(r.cell().b()),console.log(r.cell().c()),console.log(r.cell().alpha()),console.log(r.cell().beta()),console.log(r.cell().gamma()),CCP4Module.printMapStats(r);var s=new CCP4Module.CCP4MAPfile,C=new CCP4Module.Clipper_String("mapout.map");s.open_write(C),CCP4Module.exportXMapToMapFile(s,r),s.close_write(),console.log("Written",CCP4Module.clipperStringToString(C));var p=CCP4Module.FS.readFile(CCP4Module.clipperStringToString(C));postMessage(["result",p,t,l])};