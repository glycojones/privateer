var CCP4Module;importScripts("./mini-rsr-web.js");const Lib={locateFile:a=>a,onRuntimeInitialized:()=>{console.log("onRuntimeInitialized")},mainScriptUrlOrBlob:"./mini-rsr-web.js",print(a){postMessage(["output",a])},printErr(a){postMessage(["output",a])}};createRSRModule(Lib).then((function(a){CCP4Module=a})).catch((a=>{console.log("CCP4 problem :("),console.log(a)})),onmessage=function(a){console.log(a.data);const e=a.data.jobId;var t=new CCP4Module.VectorString;t.push_back("mini_rsr"),CCP4Module.FS_createDataFile(".",e+a.data.pdbinName,a.data.pdbinData,!0,!0),t.push_back("--pdbin"),t.push_back(e+a.data.pdbinName),CCP4Module.FS_createDataFile(".",e+a.data.hklinName,a.data.hklinData,!0,!0),t.push_back("--hklin"),t.push_back(e+a.data.hklinName),t.push_back("--pdbout"),t.push_back(e+"out.pdb"),t.push_back("--resno-start"),t.push_back(a.data.resnoStart.toString()),t.push_back("--resno-end"),t.push_back(a.data.resnoEnd.toString()),t.push_back("--chain-id"),t.push_back(a.data.chainId),t.push_back("--debug"),console.log(t);var o=CCP4Module.mini_rsr(t),n=CCP4Module.FS.readFile(e+"out.pdb",{encoding:"utf8"});CCP4Module.FS_unlink(e+a.data.pdbinName),CCP4Module.FS_unlink(e+a.data.hklinName),CCP4Module.FS_unlink(e+"out.pdb"),postMessage(["result",o]),postMessage(["pdb_out",n,e])};